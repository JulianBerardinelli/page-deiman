---
const { title = 'Conocé nuestros productos para el hogar', subtitle = 'Una nueva línea pensada para acompañar cada momento en casa.', ctaText = 'Saber más', ctaHref = '/productos', products = [
  {
    src: '/images/products/escencia-dulcedeleche.png',
    alt: 'Esencia sabor dulce de leche',
  },
  {
    src: '/images/products/escencia-durazno.png',
    alt: 'Esencia sabor durazno',
  },
  {
    src: '/images/products/escencia-frutilla.png',
    alt: 'Esencia sabor frutilla',
  },
  {
    src: '/images/products/escencia-vainilla.png',
    alt: 'Esencia sabor vainilla',
  },
  {
    src: '/images/products/escencia-limon.png',
    alt: 'Esencia sabor limón',
  },
  {
    src: '/images/products/frutos-del-bosque.png',
    alt: 'Esencia sabor frutos del bosque',
  },
  {
    src: '/images/products/colorante-rojo.png',
    alt: 'Colorante rojo',
  },
  {
    src: '/images/products/colorante-naranja.png',
    alt: 'Colorante naranja',
  },
  {
    src: '/images/products/colorante-amarillo.png',
    alt: 'Colorante amarillo',
  },
  {
    src: '/images/products/colorante-verde.png',
    alt: 'Colorante verde',
  },
  {
    src: '/images/products/colorante-azul.png',
    alt: 'Colorante azul',
  },
  {
    src: '/images/products/colorante-violeta.png',
    alt: 'Colorante violeta',
  },
  {
    src: '/images/products/escencia-coco.png',
    alt: 'Esencia sabor coco',
  },
] } = Astro.props;

const marqueeItems = [...products, ...products];
---
<section class="relative overflow-hidden py-16 sm:py-20">
  <div class="pointer-events-none absolute inset-0 bg-gradient-to-b from-white via-white to-slate-50"></div>
  <div class="relative mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
    <div class="relative mx-auto mb-12 max-w-3xl">
      <div
        class="absolute -left-6 top-6 h-full w-full rounded-[32px] bg-white shadow-[0_18px_40px_rgba(15,23,42,0.12)]"
      ></div>
      <div
        class="relative z-10 rounded-[32px] bg-primary px-6 py-8 text-center text-white shadow-[0_22px_60px_rgba(239,68,68,0.45)] sm:px-10 sm:py-10 intersect-once intersect-quarter motion-safe:md:opacity-0 motion-safe:md:intersect:animate-fade"
      >
        <p class="text-xs font-semibold uppercase tracking-[0.3em] text-white/80">Próximamente</p>
        <h2 class="mt-3 text-2xl font-semibold leading-tight sm:text-3xl">
          {title}
        </h2>
        <p class="mt-3 text-sm text-white/80 sm:text-base">
          {subtitle}
        </p>
        <div class="mt-6 flex justify-center">
          <a
            href={ctaHref}
            class="inline-flex items-center justify-center rounded-full bg-white px-6 py-2 text-sm font-semibold text-primary shadow-lg shadow-black/20 transition duration-300 hover:-translate-y-0.5 hover:bg-white/90"
          >
            {ctaText}
          </a>
        </div>
      </div>
    </div>

    <div
      class="relative overflow-hidden rounded-[32px] border border-gray-100 bg-white/90 p-2 shadow-sm intersect-once intersect-quarter motion-safe:md:opacity-0 motion-safe:md:intersect:animate-fade"
    >
      <div class="pointer-events-none absolute inset-y-0 left-0 w-20 bg-gradient-to-r from-white via-white/80 to-transparent"></div>
      <div class="pointer-events-none absolute inset-y-0 right-0 w-20 bg-gradient-to-l from-white via-white/80 to-transparent"></div>

      <div class="marquee-mask">
        <ul class="marquee-track flex w-max items-center gap-8 py-6 sm:gap-12">
          {marqueeItems.map((item, index) => (
            <li
              class="group flex h-28 w-28 flex-shrink-0 items-center justify-center rounded-3xl bg-white shadow-[0_16px_28px_rgba(15,23,42,0.12)] ring-1 ring-black/5 transition duration-300 hover:-translate-y-1"
              aria-hidden={index >= products.length ? 'true' : undefined}
            >
              <img
                src={item.src}
                alt={item.alt}
                loading="lazy"
                decoding="async"
                class="h-24 w-auto object-contain transition duration-300 group-hover:scale-105"
              />
            </li>
          ))}
        </ul>
      </div>
    </div>
  </div>
</section>

<style>
  .marquee-mask {
    overflow: hidden;
    mask-image: linear-gradient(90deg, transparent 0%, #000 6%, #000 94%, transparent 100%);
  }

  .marquee-track {
    animation: marquee 35s linear infinite;
  }

  .marquee-track:hover {
    animation-play-state: paused;
  }

  @keyframes marquee {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }
</style>
